# راهنمای راه‌اندازی ربات معاملاتی DEX

## پیش‌نیازها

1. **Node.js** (نسخه 16 یا بالاتر)
2. **npm** یا **yarn**
3. **کلید خصوصی کیف پول** (با موجودی کافی)
4. **API Key** از Infura یا Alchemy

## نصب وابستگی‌ها

```bash
npm install
```

## تنظیم متغیرهای محیطی

1. فایل `.env` ایجاد کنید:

```bash
cp .env.example .env
```

2. مقادیر واقعی را در فایل `.env` وارد کنید:

```env
# تنظیمات شبکه
RPC_URL=https://mainnet.infura.io/v3/YOUR_PROJECT_ID
WS_URL=wss://mainnet.infura.io/ws/v3/YOUR_PROJECT_ID
FALLBACK_RPC_URL=https://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY

# تنظیمات کیف پول (امن نگه دارید!)
PRIVATE_KEY=0xYOUR_PRIVATE_KEY_HERE

# آدرس قراردادها
ROUTER_ADDRESS=0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D
WETH_ADDRESS=0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2
USDC_ADDRESS=0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48
FUTURES_MARKET_ADDRESS=0xFUTURES_MARKET_ADDRESS

# تنظیمات گاز
GAS_LIMIT=300000
MAX_GAS_PRICE=100

# تنظیمات معاملاتی
SLIPPAGE_TOLERANCE=1
TRADE_AMOUNT=0.1
MIN_TOKEN_AMOUNT=10

# تنظیمات اتصال مجدد
MAX_RETRIES=3
RETRY_DELAY=1000

# تنظیمات لاگینگ
LOG_LEVEL=info
```

## اجرای ربات

```bash
node index.js
```

## ویژگی‌های بهبود یافته

### 🔒 امنیت

- استفاده از متغیرهای محیطی برای اطلاعات حساس
- اعتبارسنجی آدرس قراردادها
- مدیریت خطاهای امنیتی

### 🚀 عملکرد

- قیمت‌گذاری گاز پویا
- تخمین گاز برای تراکنش‌ها
- سیستم ارائه‌دهنده پشتیبان
- اتصال مجدد خودکار WebSocket

### 🔄 قابلیت اطمینان

- مکانیزم تلاش مجدد برای تراکنش‌های ناموفق
- مدیریت خطاهای خاص
- بررسی سلامت سیستم
- لاگینگ ساختاریافته

### 📊 نظارت

- ردیابی پوزیشن‌های آتی
- نظارت بر تراکنش‌های در انتظار
- گزارش‌گیری تفصیلی

## نکات مهم

1. **امنیت**: هرگز کلید خصوصی خود را در کد قرار ندهید
2. **تست**: ابتدا در شبکه تست (testnet) آزمایش کنید
3. **موجودی**: اطمینان حاصل کنید که موجودی کافی برای گاز دارید
4. **نظارت**: همیشه لاگ‌ها را بررسی کنید

## عیب‌یابی

### خطاهای رایج

1. **"کلید خصوصی نامعتبر"**

   - بررسی کنید که کلید خصوصی با `0x` شروع شود
   - طول کلید باید 66 کاراکتر باشد

2. **"موجودی ناکافی"**

   - موجودی ETH برای پرداخت گاز بررسی کنید
   - موجودی توکن برای معامله بررسی کنید

3. **"اتصال WebSocket ناموفق"**
   - آدرس WebSocket را بررسی کنید
   - اتصال اینترنت را بررسی کنید

## پشتیبانی

برای گزارش باگ یا درخواست ویژگی جدید، لطفاً issue ایجاد کنید.
